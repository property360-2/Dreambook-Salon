{% extends 'base.html' %}

{% block title %}Slot Limit Details · Dreambook Salon{% endblock title %}

{% block content %}
  <div class="container-custom py-12">
    <div class="max-w-3xl mx-auto">
      <!-- Header -->
      <div class="mb-8">
        <div class="flex items-center justify-between mb-4">
          <h1 class="text-4xl font-bold text-gradient">Slot Limit Details</h1>
          <span class="badge badge-primary">{{ slot_limit.max_slots }} Max Slot{{ slot_limit.max_slots|pluralize }}</span>
        </div>
        <a href="{% url 'appointments:slotlimit_list' %}" class="text-primary-600 hover:text-primary-300 transition-colors">
          ← Back to Slot Limits
        </a>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Main Content -->
        <div class="lg:col-span-2 space-y-6">
          <!-- Information Card -->
          <div class="card p-8">
            <h2 class="text-2xl font-bold text-light-text mb-6">Schedule Information</h2>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
              <div>
                <span class="text-light-muted text-sm block mb-1">Date</span>
                <span class="text-light-text font-semibold text-lg">{{ slot_limit.date|date:"l, F d, Y" }}</span>
              </div>
              <div>
                <span class="text-light-muted text-sm block mb-1">Time Range</span>
                <span class="text-light-text font-semibold text-lg">
                  {{ slot_limit.time_start|date:"g:i A" }} - {{ slot_limit.time_end|date:"g:i A" }}
                </span>
              </div>
            </div>

            <div class="mt-6 pt-6 border-t border-light-border">
              <span class="text-light-muted text-sm block mb-1">Maximum Concurrent Slots</span>
              <div class="flex items-baseline gap-2">
                <span class="text-gradient font-bold text-3xl">{{ slot_limit.max_slots }}</span>
                <span class="text-light-muted">appointment{{ slot_limit.max_slots|pluralize }}</span>
              </div>
            </div>

            {% if slot_limit.reason %}
              <div class="mt-6 pt-6 border-t border-light-border">
                <span class="text-light-muted text-sm block mb-2">Reason</span>
                <p class="text-light-text p-3 bg-light-elevated rounded-lg border border-light-border">
                  {{ slot_limit.reason }}
                </p>
              </div>
            {% endif %}
          </div>

          <!-- Statistics Card -->
          <div class="card p-8">
            <h2 class="text-2xl font-bold text-light-text mb-6">Statistics</h2>

            <div class="grid grid-cols-2 gap-4">
              <div class="p-4 bg-light-elevated rounded-lg border border-light-border">
                <span class="text-light-muted text-sm">Active Appointments</span>
                <span class="text-gradient font-bold text-3xl block">{{ appointments_count }}</span>
              </div>
              <div class="p-4 bg-light-elevated rounded-lg border border-light-border">
                <span class="text-light-muted text-sm">Created</span>
                <span class="text-light-text font-semibold">{{ slot_limit.created_at|date:"M d, Y" }}</span>
              </div>
            </div>
          </div>

          <!-- Timestamps Card -->
          <div class="card p-8 text-light-muted text-sm space-y-2">
            <div class="flex justify-between">
              <span>Created at:</span>
              <span>{{ slot_limit.created_at|date:"F d, Y g:i A" }}</span>
            </div>
            <div class="flex justify-between">
              <span>Last updated:</span>
              <span>{{ slot_limit.updated_at|date:"F d, Y g:i A" }}</span>
            </div>
          </div>
        </div>

        <!-- Sidebar Actions -->
        <div class="lg:col-span-1">
          <div class="card p-6 sticky top-24 space-y-3">
            <h3 class="text-lg font-bold text-light-text mb-4">Actions</h3>

            <a href="{% url 'appointments:slotlimit_edit' slot_limit.id %}" class="btn bg-blue-500/10 text-blue-400 border border-blue-500/20 hover:bg-blue-500/20 w-full">
              Edit Slot Limit
            </a>

            <form method="post" action="{% url 'appointments:slotlimit_delete' slot_limit.id %}" class="confirm-action"
                  data-confirm-title="Delete Slot Limit?"
                  data-confirm-message="Are you sure you want to delete this slot limit for {{ slot_limit.date }}? This action cannot be undone."
                  data-confirm-text="Yes, Delete"
                  data-danger="true">
              {% csrf_token %}
              <button type="submit" class="btn bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20 w-full">
                Delete Slot Limit
              </button>
            </form>

            <a href="{% url 'appointments:slotlimit_list' %}" class="btn btn-ghost w-full">
              Back to List
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
